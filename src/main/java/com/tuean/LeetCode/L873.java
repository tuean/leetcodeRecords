package com.tuean.LeetCode;



import org.springframework.util.CollectionUtils;

import java.util.*;
import java.util.stream.Collectors;

public class L873 {

//    求给定有序列表中的最长子斐波那契序列长度
//    3 <= A.length <= 1000
//    1 <= A[0] < A[1] < ... < A[A.length - 1] <= 10^9

    public static int lenLongestFibSubseq(int[] A) {

        Set<Integer> list = new HashSet<>(A.length);
        for(int x : A){
            list.add(x);
        }
        int max = 0;
        int maxValue = A[A.length - 1];
        outloop:
        for(int i = 0; i < list.size(); i++){

            for(int j = i + 1; j < list.size(); j++){
                Integer first = A[i];
                Integer second = A[j];
                Integer next = first + second;
                if(next > maxValue){
                    break;
                }
                int length = 2;
                while(list.contains(next)){

                    int tmp = next;

                    next = second + next;

                    second = tmp;

                    length ++;
                    max = max > length ? max : length;
                }
                if(length == list.size()){
                    break outloop;
                }
            }
        }
        return max > 2 ? max : 0;
    }


    public static void main(String[] args) {
        int[] x = new int[]{5,13,14,16,17,19,31,36,42,43,49,51,55,56,59,60,61,64,66,68,69,74,84,90,91,96,106,112,117,119,125,127,134,146,149,170,180,185,187,193,194,208,237,239,276,302,306,319,320,342,383,388,446,456,487,493,513,528,550,620,627,722,732,789,799,832,833,848,892,1003,1015,1168,1188,1276,1292,1345,1376,1442,1623,1642,1890,2065,2091,2177,2224,2334,2657,3058,3341,3383,3522,3600,3776,4299,4948,5406,5474,5699,5824,6110,6956,8006,8747,8857,9221,9424,9886,11255,12954,14153,14331,14920,15248,15996,18211,20960,22900,23188,24141,24672,25882,29466,33914,37053,37519,39920,41878,47677,54874,59953,60707,64592,67760,77143,88788,97006,97295,98226,104512,109638,124820,143662,156959,158933,169104,177398,201963,232450,253965,273616,287036,326783,376112,410924,442720,464434,528746,608562,664889,751470,855529,1075813,1215904,1315377,1384275,1740702,1839600,2239804,2378530,2816515,3101647,3587542,3624079,4557217,4974782,5394296,5863883,6914045,7373732,8125052,8678115,9487962,10325382,16212606,16266515,17956601,19642680,20921437,21472514,21569371,22155601,22315869,22348829,23382177,24744190,25384455,25950853,26943915,27666746,28529643,29555755,29701186,30976053,31054844,31355415,34942405,36428853,36955412,39547263,40758177,43906680,45731284,48040976,48228708,49702781,51141792,51171363,52938425,55649186,59995731,62318488,62783768,62820298,65091112,65316443,67790132,68987169,69846382,71155953,71639318,71652349,71977015,75398449,76205942,76549451,76816866,76861772,77131779,77172054,79056533,79546053,79870828,81157165,81289265,81604300,88182172,89125801,89784263,90063463,91015443,91762411,95034924,97729391,98048741,100961360,101406211,101541418,101968677,103960619,104226225,109803136,111431379,111539339,112582853,113001580,113939588,114218142,115040601,115078094,115365335,118106477,118344663,118475333,118708997,118735133,118997205,119570244,119848686,122608021,125473458,126578568,127004333,130665989,131202867,138146443,140514234,143665938,144380977,145808099,147883617,150560223,151292893,151408605,152267561,153725460,154502215,156672053,158186980,158560367,159994368,160877072,161655038,163105348,163176696,163967944,164163550,164623450,164849361,166064322,166311419,168339135,169290721,172607428,172735334,173483256,174422784,175167427,175387812,175947457,175960342,177663326,178131325,181261301,184482990,185024563,186341961,190223422,192014042,193281734,194398190,194640710,195171429,196244585,199684329,200105397,201507183,209662066,211955468,212927440,213138414,213606974,215255603,218471753,219613184,221158499,222179243,222975976,223776101,224306395,224691812,226439293,228119964,228721061,229791781,230787932,231591195,234003774,238188084,244006649,245761554,247582944,248569368,251133491,257076919,257447605,262897877,263189263,263287826,263428493,264148545,265096883,265113796,265586292,265886409,266731363,267891010,268218747,268364086,268421497,268784151,269963001,273733144,273894053,273921412,274075443,274284864,275337322,283126467,283306255,285225809,285553517,286448387,286693319,287407516,288071842,290350201,293080149,293241603,295277363,295444785,301752400,302488459,302637883,303434286,304916779,305466920,307021028,311199855,311600806,312861823,315731867,316163489,322635814,323028701,324479206,327435030,327522979,327955361,328312166,328825254,329846470,329885937,330610102,330844937,332153990,332882746,333249320,334913140,335467195,335475709,337089707,337203343,339366533,342885013,343079373,344456166,346781709,347052836,352255077,353931865,356306884,356307550,358706823,359163801,361472969,362869832,363484755,363629303,366350561,366404266,366925948,370290031,372715301,374632935,374737005,375322760,376034333,376536792,378523444,381620806,382106886,382134268,382341368,382392260,389808210,391546384,391824428,392591990,393078456,394289962,398946236,402308935,405252696,405628316,405825766,406297277,406484174,407190458,408887683,409564446,410902453,411298266,412106155,413331663,414768451,415430672,416821379,418570168,418924945,419146691,419827872,423034892,424498085,426086270,428365550,429836685,431468300,432510647,432978113,433037839,433174355,433378659,434132884,434157504,434999499,436345136,436543428,436573791,443101241,443466765,446243174,447232810,449585541,450072420,450911701,451277649,451404023,452982645,454800372,455665711,456226451,456891790,456897499,457656036,460829262,462205719,462990934,463459200,464918484,465917985,466490662,467389140,467729213,468916829,472178508,473610068,473962839,475025507,478443235,479244082,479945246,480079327,480894274,483397097,483663064,484816108,485205173,485854716,488552611,490790695,491370681,492363765,492707120,492997588,497022704,499373639,500800979,501579039,503065584,503457163,503750725,505946865,506185741,508915189,510172510,511405467,511722314,512400303,512861703,513305074,517018183,517098897,517210089,517522041,518520825,518576409,519590554,519959167,520005694,520158957,520542986,523189427,525190290,526887381,528623797,528842121,530088640,532701413,534721838,534742825,534836331,535927554,536034488,536304285,537065871,537508894,539621967,542453088,544280579,544364248,545018317,545321410,547774583,548277930,552678309,552911085,554696626,555610130,556640531,557455625,557535195,558959123,560230834,560251005,561866016,562023320,564938502,568119382,568791989,569530409,571080777,571678385,573786534,574293595,574767977,575337908,578612469,581701522,582442430,582748482,583320622,583575772,585119491,586688972,587198523,589084194,590337844,591156512,591438191,591480562,592909366,594041872,594276243,595062602,595528447,600361011,601079117,601275826,601482383,602108118,602506544,603038812,605017349,605460907,607313197,607459213,608560985,610959453,611182702,611254437,611919600,615343876,617584166,621278996,622248427,622373177,622375941,623241227,623737544,626435533,627813172,628834032,630807597,633287234,635248694,636249357,637086517,638381737,638524604,638667272,640169338,640534134,641864980,642961812,643014747,643420664,644146144,648219052,648343412,648661292,650912490,651085703,651805172,654737473,654866604,655028258,655601382,657073935,660288177,662897132,664107169,664138539,665838191,666449567,667823682,668497884,670920155,673682294,676368098,677880642,678209859,678521675,679448118,680624312,681679202,683085020,684340386,685215291,686680249,688255106,690508395,690917614,692546218,693747822,693820774,694134094,694609636,696103022,697463432,698831390,700137858,700585437,702422646,702489657,703758590,703988406,704200533,705986107,706851531,707051871,708030822,708517405,709802913,712018525,712996117,715909564,716145880,716704333,717016377,717415107,717808563,718271108,718897590,718948486,719908631,720620123,721486317,721833841,722598937,723914712,726767358,726836660,727520735,730071823,730228799,730816548,732691378,732699345,733612196,734076468,735263822,735975681,736942915,737303590,737421500,740936646,743171675,743754438,744330498,748574032,749389842,753285951,758034720,758741226,758847354,759038819,761358508,761771675,762684279,763886103,765085655,766220457,772098048,772542261,772968564,774442145,775512913,775713446,776204637,776354343,780360770,781144168,781347527,781388522,782648750,783329981,783341625,785599797,788027251,788607922,789547377,794195842,794546883,794739764,795752014,797246005,800470528,800522747,801299299,802320702,803748586,807316472,808068573,809018049,811052948,812880398,815125284,816032609,816732886,817836694,819459609,823392532,824809001,825111534,826402741,827690462,830954002,832827792,833323061,833374183,834016651,835530457,835873040,835880003,837008521,837846061,838849871,839073815,840720880,841784131,845372184,845872325,848241481,848416985,850150125,852023616,852422382,854041603,854106489,859545219,859708129,860171259,860196889,861678124,861721996,862137344,862728204,863156123,864163541,864272572,865312658,866174288,867544432,869147474,869963337,870200604,870395374,872013196,872526870,873093195,873975029,875197704,878437107,879424482,880660024,884348472,884371692,888123902,888328908,890736202,891475142,892465301,892957982,893516544,893542476,894364091,896045077,897949998,898616671,899067373,899307815,900335859,901868784,902668813,902986510,903339921,903541670,903723277,904058127,905493579,906839262,908201805,909452879,911813708,912559279,912876814,914253236,914394593,916269800,917245660,919735906,921984528,922020030,922400168,923264027,923932531,924316559,925172435,927742610,927907713,929476653,930580374,933122208,934480953,935005693,936581973,939570874,940304854,940445990,942696387,946085496,948044063,949648547,950666824,952680005,953049454,954691204,954911093,956361292,956811431,957519656,958424971,959093182,959546337,959732787,961929627,963241081,964111775,965643422,966757654,967492085,967595430,967644579,967993298,969771618,971115680,971862743,972175153,972771302,973225284,975262205,975509032,976490474,978248862,979388063,980202338,981000609,981511645,981760879,983554486,985027375,986661807,987309295,987849362,990414734,993926632,993936472,993977492,994949982,995318152,995327525};
        long st = System.currentTimeMillis();
        lenLongestFibSubseq(x);
        long end = System.currentTimeMillis();
        System.out.println(end-st);

    }
}
